{"version":3,"sources":["components/filter.js","components/form.js","components/notification.js","services/personsData.js","App.js","serviceWorker.js","index.js"],"names":["Filter","props","value","onChange","Form","onSubmit","valueNewName","onChangeNote","valueNewNro","onChangeNro","type","Notification","message","className","baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","App","useState","persons","setPersons","newName","setNewName","newNro","setNewNro","filter","setFilter","deleteId","setDeleteId","alertMessage","setAlertMessage","errorMessage","setErrorMessage","useEffect","phonebookService","initialData","handleDelete","event","preventDefault","personToKill","find","x","name","window","confirm","returnedBooking","map","booking","setTimeout","n","catch","error","Note","key","tel","onMouseOver","Book","personsToShow","person","number","toLowerCase","includes","eventFilter","target","idToUpdate","phoneBookObject","personIdToUpdate","personsIndex","findIndex","obj","personsToChange","returnedData","concat","eventNro","Boolean","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","console"],"mappings":"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","file":"static/js/main.07f71594.chunk.js","sourcesContent":["import React from 'react'\n\nconst Filter = (props) => {\n\n    return(\n     <form>\n      Filter shown with name:<br/> \n        <input \n        value= {props.value}\n        onChange={props.onChange}\n        /> \n      </form>\n    )\n}\n\nexport default Filter","import React from 'react'\n\nconst Form = (props) => {\n\n    return(\n     <form onSubmit={props.onSubmit}>\n\n<div>\n  name: <input \n  value={props.valueNewName} \n  onChange={props.onChangeNote}\n  />\n</div>\n\n<div>\n  tel: <input \n  value={props.valueNewNro} \n  onChange={props.onChangeNro}\n  />\n</div>\n\n<div>\n  <button type=\"submit\">add</button>\n</div>\n\n</form>\n    )\n}\n\nexport default Form","import React from 'react'\n\nconst Notification = ({ message, type }) => {\n    if (message === null) {\n      return null\n    }\n  \n    return (\n      <div className={type}>\n        {message}\n      </div>\n    )\n  }\n\n  export default Notification","import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => response.data)\n}\nconst create = newObject => {\n    const request = axios.post(baseUrl, newObject)\n    return request.then(response => response.data)\n  }\n  \n  const update = (id, newObject) => {\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\n    return request.then(response => response.data)\n  }\n\n  const deleteData = (id) => {\n    const request = axios.delete(`${baseUrl}/${id}`)  \n    return request.then(response => response.data)  \n  }\n  \n  export default { \n    getAll, \n    create, \n    update, \n    deleteData\n  }","import React, { useState, useEffect } from 'react'\n// import axios from 'axios'\nimport Filter from './components/filter'\nimport Form from './components/form'\nimport Notification from './components/notification'\nimport phonebookService from './services/personsData'\n\nconst App = () => {\n\n  const [ persons, setPersons] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNro, setNewNro ] = useState('')\n  const [ filter, setFilter ] = useState('')\n  const [ deleteId, setDeleteId ] = useState([])\n  const [alertMessage, setAlertMessage] = useState(null)\n  const [errorMessage, setErrorMessage] = useState(null)\n\n  \n  useEffect(() => {\n    phonebookService\n      .getAll()\n      .then(initialData => {\n        setPersons(initialData)\n      })\n  }, [])\n\n\n// --------NEW BOOKING -------------------------//\n  const addNewName = (event) => {\n    event.preventDefault()\n\n  const names = persons.map(person => {\n    return person.name\n  })\n   const isAlready = names.includes(newName)\n   // if name already exists, will ask to change number\n   if (isAlready) { \n    if(window.confirm(`Name ${newName} already exists, do you want to update the number?`)){\n      const idToUpdate = persons.find(x=> x.name === newName)\n      \n      const phoneBookObject = {\n        name: newName,\n        number: newNro,\n        id: idToUpdate.id\n        \n      } \n      const personIdToUpdate = persons.find(x=> x.name === newName).id\n\n      // UPDATE NUMBER\n      phonebookService\n      .update(personIdToUpdate, phoneBookObject)\n      .then(()=>{\n      const personsIndex = persons.findIndex((obj => obj.id === personIdToUpdate))\n      const personsToChange = persons\n      personsToChange[personsIndex].number = newNro\n      setPersons(personsToChange)\n    })\n    .then(setAlertMessage(newName + 'Â´s number is now updated!'))\n    .then(\n      setTimeout(() => {\n        setAlertMessage(null)\n      }, 4000)\n    )\n      \n    } \n    // if name is new -> \n   } else {\n\n    const phoneBookObject = {\n      name: newName,\n      number: newNro,\n    }\n\n    phonebookService\n      .create(phoneBookObject)\n      .then(returnedData => {\n        setPersons(persons.concat(returnedData))\n      }\n      ).then(setAlertMessage(newName + ' is now added to phone Bookkel'))\n      .then(\n        setTimeout(() => {\n          setAlertMessage(null)\n        }, 4000)\n      )\n   }\n   // reset states\n   setNewName('')\n   setNewNro('')\n  }\n  // --------DELETE BOOKING -------------------------//\n  const handleDelete = (event) => {\n    event.preventDefault()\n    const personToKill = persons.find(x=> x.id === deleteId).name\n\n    if(window.confirm('Kill ' + personToKill + '?')){\n      \n       phonebookService\n       .deleteData(deleteId).then(returnedBooking => {\n        setPersons(persons.map(booking => booking.id !== personToKill ? booking : returnedBooking))\n       })\n       .then\n          (()=>{\n            setAlertMessage( personToKill + ' is removed from phoneboo succesfully!')\n             setTimeout(()=> {\n             setAlertMessage(null)\n             },4000)}\n         )\n       .then(()=>{setPersons(persons.filter (n=> n.id !== deleteId))})\n       .catch(error => {\n         setErrorMessage(personToKill + ' is already removed from phonebook')\n         setTimeout(()=> {\n           setErrorMessage(null)\n         },4000)\n         })\n       }\n \n\n \n      // const personsAfterDie = persons.filter(person => {\n        //return person.id !== deleteId\n        \n    }\n      // setPersons(personsAfterDie)\n  \n  \n  const Note = (props) => {\n      return (\n        <div key={props.id}>\n          <form onSubmit = {handleDelete}>\n          <strong>\n            {props.name}\n          </strong>\n          , tel: {props.tel}\n          <input type = 'hidden' name = 'id' value = {props.id}/>\n           <button\n           onMouseOver = {()=> setDeleteId(props.id)}\n            type = 'submit'\n           >Delete</button>\n          </form>\n        </div>\n      )\n    }\n  \n  const Book = (props) => {\n  const personsToShow = props.person\n      return(\n          <div>\n              {personsToShow.map(person => \n              <Note key={person.id} name={person.name} tel={person.number }id = {person.id} />\n              )}\n        </div>\n      )\n  }\n\n  const handleFilterChange = (eventFilter) => {\n    setFilter(eventFilter.target.value)\n    // console.log(eventFilter.target.value)\n  }\n\n  const handleNoteChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNroChange = (eventNro) => { \n    setNewNro(eventNro.target.value)\n  }\n  const personsToShow = filter\n  ? persons.filter (persons => persons.name.toLowerCase().includes(filter.toLowerCase())) \n  : persons\n\n\n  \n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={alertMessage} type=\"greenAlert\"/>\n      <Notification message={errorMessage} type=\"redAlert\"/>\n      <Filter value = {filter} onChange={handleFilterChange} />\n      <h2>Add a new name</h2>\n      <Form \n        onSubmit={addNewName}\n        valueNewName={newName} \n        onChangeNote={handleNoteChange}\n        valueNewNro={newNro}\n        onChangeNro={handleNroChange}\n      />\n      <h2>Numbers</h2>\n      <Book person={personsToShow} />\n    </div>\n  )\n\n}\n\nexport default App","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}